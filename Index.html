<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <!-- Disable scroll restoration and force top on every load -->
  <script>
    if ('scrollRestoration' in history) {
      history.scrollRestoration = 'manual';
    }
    window.addEventListener('load', () => {
      window.scrollTo(0, 0);
    });
  </script>

  <!-- Favicons -->
  <link rel="shortcut icon" href="/favicon.ico"/>
  <link rel="icon" href="/favicon.ico"/>
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>

  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5J4ED746BT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5J4ED746BT');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <meta name="description" content="CBE â€“ Precision Forex, Simplified. Daily signals, mentorship, and capital support.">
  <meta name="keywords" content="forex, trading, signals, mentorship, capital support, CBE, Chukwuemeka Bullion Exchange">
  <title>CBE â€“ Precision Forex, Simplified</title>

  <!-- Poppins & FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/your-kit-code.js" crossorigin="anonymous"></script>

  <style>
    /* RESET & BASE */
    * { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior:smooth; }
    body, html {
      width:100%; height:100%;
      font-family:'Poppins',sans-serif;
      color:var(--text); background:var(--bg);
      overflow-x:hidden;
    }
    a { color:var(--gold); text-decoration:none; }
    ul,ol { margin-left:1.2em; }
    img { display:block; max-width:100%; }

    /* THEME VARIABLES */
    :root {
      --bg:#000; --text:#fff;
      --gold:#ffd700; --gold-dark:#cca300;
      --overlay:rgba(0,0,0,0.15);
      --glass-bg:rgba(255,255,255,0.05);
    }
    [data-theme="light"] {
      --bg:#f5f5f5; --text:#333;
      --gold:#cca300; --gold-dark:#b58900;
      --overlay:rgba(255,255,255,0.15);
      --glass-bg:rgba(0,0,0,0.05);
    }

    /* TOP NAVIGATION */
    #top-nav {
      position:fixed; top:0; left:0; width:100%;
      background:rgba(0,0,0,0.7); padding:10px 0; z-index:20;
      text-align:center;
    }
    #top-nav a {
      margin:0 15px; color:#fff; font-weight:500;
      padding:6px 12px; border-radius:4px;
      transition:background .3s;
    }
    #top-nav a:hover { background:rgba(255,215,0,0.2); }

    /* THEME TOGGLE */
    #theme-toggle {
      position:fixed; top:20px; left:20px;
      background:none; border:none;
      font-size:1.5rem; cursor:pointer;
      color:var(--text); z-index:30;
    }

    /* HERO */
    header {
      padding:140px 20px 60px; text-align:center; position:relative;
    }
    header .logo img { width:160px; transition:transform .3s; cursor:pointer; }
    header .logo img:hover { transform:scale(1.05); }
    header h1 {
      font-size:3.5rem; color:var(--gold); margin:20px 0 10px;
    }
    header p {
      font-size:1.2rem; color:var(--text);
      margin:0 auto 20px; max-width:700px;
    }
    .btn-gold {
      display:inline-block; padding:12px 30px;
      background:var(--gold); color:#000;
      border-radius:4px; font-weight:600;
      transition:transform .3s;
    }
    .btn-gold:hover { transform:translateY(-2px); }

    /* SECTIONS & ANIMATION */
    section {
      padding:80px 20px; max-width:1000px; margin:auto;
    }
    section h2 {
      font-size:2.5rem; text-align:center;
      margin-bottom:1em; color:var(--gold);
    }
    .slide-in {
      opacity:0; transform:translateY(50px);
      transition:all .8s ease-out;
    }
    .slide-in.visible {
      opacity:1; transform:translateY(0);
    }

    /* ABOUT */
    #about ul { margin-top:10px; }
    #about li {
      margin:8px 0; padding-left:20px;
      position:relative;
    }
    #about li::before {
      content:'\f00c'; font-family:'Font Awesome 5 Free';
      font-weight:900; position:absolute; left:0;
      color:var(--gold);
    }

    /* STATS */
    .stats {
      display:flex; flex-wrap:wrap; gap:20px;
      justify-content:center; text-align:center;
    }
    .stat { flex:1 1 200px; }
    .number { font-size:3rem; font-weight:700; }
    .label { margin-top:.3em; }

    /* PLANS */
    .plans {
      display:flex; flex-wrap:wrap;
      gap:20px; justify-content:center;
      margin-top:20px;
    }
    .plan-card {
      width:300px; background:var(--glass-bg);
      border-radius:16px; padding:2rem;
      backdrop-filter:blur(8px);
      box-shadow:0 4px 30px rgba(0,0,0,0.5);
      border:1px solid rgba(255,255,255,0.2);
      text-align:center;
      transition:transform .3s,box-shadow .3s;
    }
    .plan-card:hover {
      transform:translateY(-8px);
      box-shadow:0 6px 40px rgba(0,0,0,0.6);
    }
    .plan-card h3 { color:var(--gold); margin-bottom:10px; }
    .plan-card .price { font-size:2.5rem; margin:10px 0; }
    .plan-card ul { text-align:left; margin:10px 0; }
    .plan-card li {
      margin:6px 0; padding-left:20px;
      position:relative;
    }
    .plan-card li::before {
      content:'\f00c'; font-family:'Font Awesome 5 Free';
      font-weight:900; position:absolute; left:0;
      color:var(--gold);
    }
    .plan-card .save {
      font-size:.9rem; color:var(--gold-dark);
      margin-bottom:10px;
    }
    .subscribe-btn {
      display:inline-block; padding:.8rem 2rem;
      background:var(--gold); color:#000;
      border-radius:30px; text-decoration:none;
      transition:background .3s;
    }
    .subscribe-btn:hover {
      background:var(--gold-dark);
    }

    /* FAQ */
    .faq-question {
      cursor:pointer; padding:12px;
      background:rgba(212,175,55,0.1);
      border:1px solid var(--gold);
      border-radius:4px;
      display:flex; justify-content:space-between;
      align-items:center;
    }
    .faq-answer {
      max-height:0; overflow:hidden;
      transition:max-height .4s ease;
      padding:0 12px;
      border-left:1px solid var(--gold);
      background:rgba(0,0,0,0.5);
    }
    .faq-answer p { margin:10px 0; }

    /* TESTIMONIALS CTA */
    #testimonials {
      text-align:center;
    }
    #testimonials .btn-gold {
      margin:0 auto;
    }

    /* LIVE GOLD CHART (BOTTOM) */
    #gold-chart {
      width:100%; height:80vh;
      margin:0 auto; position:relative;
    }
    #tradingview_fullscreen {
      width:100%; height:100%;
    }

    /* CHAT BUTTONS */
    .chat-btns {
      position:fixed; bottom:100px; left:20px;
      display:flex; flex-direction:column; gap:10px;
      z-index:20;
    }
    .chat-btns a {
      width:50px; height:50px;
      border-radius:50%; display:flex;
      align-items:center; justify-content:center;
      color:#fff; font-size:1.5rem;
    }
    .chat-btns a[href*="wa.me"] { background:#25D366; }
    .chat-btns .telegram { background:#0088cc; }

    /* FOOTER */
    footer {
      text-align:center; padding:40px 20px;
      background:rgba(0,0,0,0.8); font-size:.9rem;
    }
    footer a { color:var(--gold); }
  </style>
</head>
<body id="top">

  <!-- Theme toggle -->
  <button id="theme-toggle" aria-label="Toggle light/dark">ðŸŒž</button>

  <!-- Top nav -->
  <nav id="top-nav">
    <a href="#gold-chart">Live Gold Chart</a>
  </nav>

  <!-- Hero -->
  <header class="slide-in">
    <div class="logo"><a href="index.html"><img src="CBE_logo.png" alt="CBE Logo"></a></div>
    <h1>Precision Forex, Simplified</h1>
    <p>Daily signals â€¢ Mentorship â€¢ Capital support</p>
    <a href="CBE_apply.html" class="btn-gold">Apply to Join Now</a>
  </header>

  <!-- About -->
  <section id="about" class="slide-in">
    <h2>About CBE</h2>
    <p>CBE empowers traders of all levels with:</p>
    <ul>
      <li>Daily Trading Signals</li>
      <li>One-on-One Mentorship</li>
      <li>Account Management & Capital Support</li>
    </ul>
  </section>

  <!-- Our Track Record -->
  <section id="stats" class="slide-in">
    <h2>Our Track Record</h2>
    <div class="stats">
      <div class="stat">
        <div class="number" id="signals-published" data-target="0">0</div>
        <div class="label">Signals Published</div>
      </div>
      <div class="stat">
        <div class="number" id="win-rate" data-target="0">0</div>
        <div class="label">Win Rate (%)</div>
      </div>
      <div class="stat">
        <div class="number" id="trades-month" data-target="0">0</div>
        <div class="label">Trades This Month</div>
      </div>
    </div>
  </section>

  <!-- Plans -->
  <section id="plans" class="slide-in">
    <h2>VIP Subscription Plans</h2>
    <div class="plans">
      <!-- ... plan cards as before ... -->
    </div>
  </section>

  <!-- Testimonials -->
  <section id="testimonials" class="slide-in">
    <h2>What Traders Say</h2>
    <div style="text-align:center;">
      <a href="testimonials.html" class="btn-gold">See Live Testimonials</a>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="slide-in">
    <!-- ... FAQ items as before ... -->
  </section>

  <!-- Live Gold Chart -->
  <section id="gold-chart">
    <div id="tradingview_fullscreen"></div>
  </section>

  <!-- Footer -->
  <footer>
    <p>Â© 2025 Chukwuemeka Bullion Exchange. All rights reserved.</p>
    <p>CBE offers mentorship, signals & capital support. Forex trading involves risk. 18+ only.</p>
    <p><a href="privacy.html">Privacy Policy</a> | <a href="terms.html">Terms & Conditions</a></p>
  </footer>

  <!-- TradingView Widget -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <script>
    new TradingView.widget({
      container_id: "tradingview_fullscreen",
      autosize: true,
      symbol: "OANDA:XAUUSD",
      interval: "60",
      timezone: "Etc/UTC",
      theme: document.documentElement.getAttribute('data-theme'),
      style: "1",
      locale: "en",
      toolbar_bg: "#1f1f1f",
      allow_symbol_change: true,
      hide_side_toolbar: false,
      withdateranges: true,
      details: true,
      studies: ["MACD@tv-basicstudies","RSI@tv-basicstudies"]
    });
  </script>

  <!-- Supabase Stats Fetch & Animate -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    const SUPA_URL      = 'https://dapwpgvnfjcfqqhrpxla.supabase.co';
    const SUPA_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9â€¦'; // truncated for brevity
    const supabase      = window.supabase.createClient(SUPA_URL, SUPA_ANON_KEY);

    document.addEventListener('DOMContentLoaded', () => {
      // slide-in animations
      document.querySelectorAll('.slide-in').forEach(el => {
        const io = new IntersectionObserver((entries, obs) => {
          entries.forEach(e => {
            if (e.isIntersecting) {
              e.target.classList.add('visible');
              obs.unobserve(e.target);
            }
          });
        }, { threshold: 0.3 });
        io.observe(el);
      });

      // stats observer
      const statsSection = document.getElementById('stats');
      new IntersectionObserver((entries, obs) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            fetchAndAnimate();
            obs.unobserve(statsSection);
          }
        });
      }, { threshold: 0.3 }).observe(statsSection);
    });

    async function fetchAndAnimate() {
      try {
        const { count: signalsCount = 0 } = await supabase
          .from('signals').select('id', { head: true, count: 'exact' });
        const startOfMonth = new Date();
        startOfMonth.setDate(1); startOfMonth.setHours(0,0,0,0);
        const { count: tradesCount = 0 } = await supabase
          .from('trade_history')
          .select('id', { head: true, count: 'exact' })
          .gte('created_at', startOfMonth.toISOString());
        const { data: insights = [] } = await supabase
          .from('trade_insights').select('pips');
        const wins = insights.filter(i => i.pips > 0).length;
        const rate = insights.length ? Math.round(wins / insights.length * 100) : 0;

        document.getElementById('signals-published').dataset.target = signalsCount;
        document.getElementById('win-rate').dataset.target         = rate;
        document.getElementById('trades-month').dataset.target     = tradesCount;

        document.querySelectorAll('.number').forEach(el => {
          const tgt = +el.dataset.target, step = Math.max(1, Math.floor(tgt/100));
          let c = 0;
          (function upd(){
            c = Math.min(tgt, c + step);
            el.textContent = c;
            if (c < tgt) requestAnimationFrame(upd);
          })();
        });
      } catch(err) {
        console.error('Stats fetch error:', err);
      }
    }
  </script>

  <!-- Smartsupp Live Chat -->
  <script>
    var _smartsupp=_smartsupp||{};_smartsupp.key='018a8bbd868518221e725341a7b2601231ec7ce8';
    (function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];
      s=d.getElementsByTagName('script')[0];c=d.createElement('script');
      c.type='text/javascript';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';
      s.parentNode.insertBefore(c,s);
    })(document);
  </script>

  <!-- Site Scripts (theme toggle & FAQ) -->
  <script>
    const btn = document.getElementById('theme-toggle');
    btn.addEventListener('click', () => {
      const cur = document.documentElement.getAttribute('data-theme'),
            nxt = cur==='dark'?'light':'dark';
      document.documentElement.setAttribute('data-theme', nxt);
      localStorage.setItem('theme', nxt);
      btn.textContent = nxt==='dark'?'ðŸŒž':'ðŸŒœ';
    });
    (()=>{
      const t = localStorage.getItem('theme')||'dark';
      document.documentElement.setAttribute('data-theme', t);
      btn.textContent = t==='dark'?'ðŸŒž':'ðŸŒœ';
    })();

    document.querySelectorAll('.faq-question').forEach(q=>
      q.addEventListener('click', ()=>{
        const ans = q.nextElementSibling;
        ans.style.maxHeight = ans.style.maxHeight ? null : ans.scrollHeight+'px';
        q.querySelector('i').classList.toggle('fa-chevron-up');
      })
    );
  </script>

</body>
</html>
