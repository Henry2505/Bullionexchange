<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <!-- Favicons -->
  <link rel="shortcut icon" href="/favicon.ico"/>
  <link rel="icon" href="/favicon.ico"/>
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>

  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5J4ED746BT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5J4ED746BT');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <meta name="description" content="CBE â€“ Precision Forex, Simplified. Daily signals, mentorship, and capital support.">
  <meta name="keywords" content="forex, trading, signals, mentorship, capital support, CBE, Chukwuemeka Bullion Exchange">
  <title>CBE â€“ Precision Forex, Simplified</title>

  <!-- Poppins & FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/your-kit-code.js" crossorigin="anonymous"></script>

  <style>
    /* RESET & BASE */
    * { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior:smooth; }
    body, html {
      width:100%; height:100%;
      font-family:'Poppins',sans-serif;
      color:var(--text); background:var(--bg);
      overflow-x:hidden;
    }
    a { color:var(--gold); text-decoration:none; }
    ul,ol { margin-left:1.2em; }
    img { display:block; max-width:100%; }

    /* THEME VARIABLES */
    :root {
      --bg:#000; --text:#fff;
      --gold:#ffd700; --gold-dark:#cca300;
      --overlay:rgba(0,0,0,0.15);
      --glass-bg:rgba(255,255,255,0.05);
    }
    [data-theme="light"] {
      --bg:#f5f5f5; --text:#333;
      --gold:#cca300; --gold-dark:#b58900;
      --overlay:rgba(255,255,255,0.15);
      --glass-bg:rgba(0,0,0,0.05);
    }

    /* TOP NAVIGATION */
    #top-nav {
      position:fixed; top:0; left:0; width:100%;
      background:rgba(0,0,0,0.7); padding:10px 0; z-index:20;
      text-align:center;
    }
    #top-nav a {
      margin:0 15px; color:#fff; font-weight:500;
      padding:6px 12px; border-radius:4px;
      transition:background .3s;
    }
    #top-nav a:hover { background:rgba(255,215,0,0.2); }

    /* THEME TOGGLE */
    #theme-toggle {
      position:fixed; top:20px; left:20px;
      background:none; border:none;
      font-size:1.5rem; cursor:pointer;
      color:var(--text); z-index:30;
    }

    /* HERO */
    header {
      padding:140px 20px 60px; text-align:center; position:relative;
    }
    header .logo img { width:160px; transition:transform .3s; cursor:pointer; }
    header .logo img:hover { transform:scale(1.05); }
    header h1 {
      font-size:3.5rem; color:var(--gold); margin:20px 0 10px;
    }
    header p {
      font-size:1.2rem; color:var(--text);
      margin:0 auto 20px; max-width:700px;
    }
    .btn-gold {
      display:inline-block; padding:12px 30px;
      background:var(--gold); color:#000;
      border-radius:4px; font-weight:600;
      transition:transform .3s;
    }
    .btn-gold:hover { transform:translateY(-2px); }

    /* SECTIONS & ANIMATION */
    section {
      padding:80px 20px; max-width:1000px; margin:auto;
    }
    section h2 {
      font-size:2.5rem; text-align:center;
      margin-bottom:1em; color:var(--gold);
    }
    .slide-in {
      opacity:0; transform:translateY(50px);
      transition:all .8s ease-out;
    }
    .slide-in.visible {
      opacity:1; transform:translateY(0);
    }

    /* ABOUT */
    #about ul { margin-top:10px; }
    #about li {
      margin:8px 0; padding-left:20px;
      position:relative;
    }
    #about li::before {
      content:'\f00c'; font-family:'Font Awesome 5 Free';
      font-weight:900; position:absolute; left:0;
      color:var(--gold);
    }

    /* STATS */
    .stats {
      display:flex; flex-wrap:wrap; gap:20px;
      justify-content:center; text-align:center;
    }
    .stat { flex:1 1 200px; }
    .number { font-size:3rem; font-weight:700; }
    .label { margin-top:.3em; }

    /* PLANS */
    .plans {
      display:flex; flex-wrap:wrap;
      gap:20px; justify-content:center;
      margin-top:20px;
    }
    /* â€¦ rest of your CSS unchanged â€¦ */
  </style>
</head>
<body id="top">

  <!-- Theme toggle -->
  <button id="theme-toggle" aria-label="Toggle light/dark">ðŸŒž</button>

  <!-- Top nav -->
  <nav id="top-nav">
    <a href="#gold-chart">Live Gold Chart</a>
  </nav>

  <!-- Hero -->
  <header class="slide-in">
    <div class="logo"><a href="index.html"><img src="CBE_logo.png" alt="CBE Logo"></a></div>
    <h1>Precision Forex, Simplified</h1>
    <p>Daily signals â€¢ Mentorship â€¢ Capital support</p>
    <a href="CBE_apply.html" class="btn-gold">Apply to Join Now</a>
  </header>

  <!-- About -->
  <section id="about" class="slide-in">
    <h2>About CBE</h2>
    <p>CBE empowers traders of all levels with:</p>
    <ul>
      <li>Daily Trading Signals</li>
      <li>One-on-One Mentorship</li>
      <li>Account Management & Capital Support</li>
    </ul>
  </section>

  <!-- Our Track Record -->
  <section id="stats" class="slide-in">
    <h2>Our Track Record</h2>
    <div class="stats">
      <!-- Signals Published -->
      <div class="stat">
        <div class="number" id="signals-published" data-target="0">0</div>
        <div class="label">Signals Published</div>
      </div>
      <!-- Win Rate (%) -->
      <div class="stat">
        <div class="number" id="win-rate" data-target="0">0</div>
        <div class="label">Win Rate (%)</div>
      </div>
      <!-- Trades This Month -->
      <div class="stat">
        <div class="number" id="trades-month" data-target="0">0</div>
        <div class="label">Trades This Month</div>
      </div>
    </div>
  </section>

  <!-- â€¦ the rest of your sections (Plans, FAQ, Chart, Footer) remain exactly as before â€¦ -->

  <!-- Supabase Stats Fetch & Animate -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    // Your Supabase credentials
    const SUPA_URL      = 'https://dapwpgvnfjcfqqhrpxla.supabase.co';
    const SUPA_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhcHdwZ3ZuZmpjZnFxaHJweGxhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwNDA4ODgsImV4cCI6MjA2MjYxNjg4OH0.ICC0UsLlzJDNre7rFCeD3k6iVzo6jOJgn3PhABpEMsQ';
    const supabase      = window.supabase.createClient(SUPA_URL, SUPA_ANON_KEY);

    document.addEventListener('DOMContentLoaded', () => {
      // Animate slide-ins
      document.querySelectorAll('.slide-in').forEach(el => {
        const io = new IntersectionObserver((ents, obs) => {
          ents.forEach(e => {
            if (e.isIntersecting) {
              e.target.classList.add('visible');
              obs.unobserve(e.target);
            }
          });
        }, { threshold: 0.3 });
        io.observe(el);
      });

      // Only fetch & animate stats once the section comes into view
      const statsSection = document.getElementById('stats');
      new IntersectionObserver((ents, obs) => {
        ents.forEach(e => {
          if (e.isIntersecting) {
            fetchAndAnimate();
            obs.unobserve(statsSection);
          }
        });
      }, { threshold: 0.3 }).observe(statsSection);
    });

    async function fetchAndAnimate() {
      try {
        // 1) Total signals
        const signalsRes = await supabase
          .from('signals')
          .select('id', { head: true, count: 'exact' });
        const signalsCount = signalsRes.count ?? 0;

        // 2) Trades this calendar month
        const startOfMonth = new Date();
        startOfMonth.setDate(1);
        startOfMonth.setHours(0,0,0,0);
        const tradesRes = await supabase
          .from('trade_history')
          .select('id', { head: true, count: 'exact' })
          .gte('created_at', startOfMonth.toISOString());
        const tradesCount = tradesRes.count ?? 0;

        // 3) Win rate from trade_insights
        const insightsRes = await supabase
          .from('trade_insights')
          .select('pips');
        const insights = insightsRes.data || [];
        const wins = insights.filter(i => i.pips > 0).length;
        const rate = insights.length
          ? Math.round((wins / insights.length) * 100)
          : 0;

        // Set data-targets
        document.getElementById('signals-published').dataset.target = signalsCount;
        document.getElementById('trades-month').dataset.target     = tradesCount;
        document.getElementById('win-rate').dataset.target         = rate;

        // Animate each counter
        document.querySelectorAll('.number').forEach(el => {
          const target = +el.dataset.target;
          let count = 0;
          const step = Math.max(1, Math.floor(target / 100));
          (function animate() {
            count = Math.min(target, count + step);
            el.textContent = count;
            if (count < target) {
              requestAnimationFrame(animate);
            }
          })();
        });

      } catch (err) {
        console.error('Stats fetch error:', err);
      }
    }
  </script>

  <!-- â€¦ your remaining scripts (TradingView, Smartsupp, theme/FAQ/jet logic) unchanged â€¦ -->

</body>
</html>
