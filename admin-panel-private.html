<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel – CBE</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="styles.css"/>
  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body oncontextmenu="return false;">
  <!-- Background Video & Overlay -->
  <video id="bg" autoplay muted loop playsinline poster="fallback.jpg">
    <source src="star-video.mp4" type="video/mp4"/>
  </video>
  <div class="overlay"></div>

  <!-- Password Modal -->
  <div id="pwModal">
    <div class="box">
      <h3>Admin Login</h3>
      <input type="text" id="adminEmail" placeholder="Email"/>
      <input type="password" id="adminPw" placeholder="Password"/>
      <button onclick="login()">Login</button>
    </div>
  </div>

  <!-- Top Bar -->
  <div class="top-bar">
    <button class="logoutBtn" onclick="logout()">Logout</button>
    <h1>CBE Admin Panel</h1>
    <button class="menu-toggle" onclick="toggleSidebar()">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- Sidebar Navigation -->
  <div class="sidebar" id="sidebar">
    <a href="#" data-target="payments">Payment Records</a>
    <a href="#" data-target="applications">Applications</a>
    <a href="#" data-target="users">User Approvals</a>
    <a href="#" data-target="signals">Publish Signal</a>
    <a href="#" data-target="messages">Inbox</a>
    <a href="#" data-target="tradeInsights">Trade Insights</a>
    <a href="#" data-target="tradeHistory">Trade History</a>
    <a href="#" data-target="logs">Admin Logs</a>
    <a href="index.html">← Back to Site</a>
  </div>

  <!-- Main Content -->
  <div id="main-content">
    <!-- Payments -->
    <div class="content-section" id="payments">
      <h2>Payment Records</h2>
      <table>
        <thead><tr><th>Email</th><th>Plan</th><th>Status</th></tr></thead>
        <tbody id="paymentTableBody"></tbody>
      </table>
    </div>

    <!-- Applications -->
    <div class="content-section" id="applications">
      <h2>Application Submissions</h2>
      <table>
        <thead><tr><th>Name</th><th>Email</th><th>Status</th><th>Action</th></tr></thead>
        <tbody id="applicationTableBody"></tbody>
      </table>
    </div>

    <!-- Users -->
    <div class="content-section" id="users">
      <h2>User Approvals</h2>
      <table>
        <thead><tr><th>Name</th><th>Email</th><th>Status</th></tr></thead>
        <tbody id="userTableBody"></tbody>
      </table>
    </div>

    <!-- Signals -->
    <div class="content-section" id="signals">
      <h2>Publish Signal</h2>
      <div class="form-group"><label>Pair</label><input id="pair"/></div>
      <div class="form-group"><label>Entry Point</label><input id="entry" type="number" step="0.01"/></div>
      <div class="form-group"><label>Stop Loss</label><input id="sl" type="number" step="0.01"/></div>
      <div class="form-group"><label>Take Profit</label><input id="tp" type="number" step="0.01"/></div>
      <div class="form-group"><label>Note</label><textarea id="signalNote"></textarea></div>
      <button class="btn" id="submitSignal">Publish</button>
    </div>

    <!-- Inbox -->
    <div class="content-section" id="messages">
      <h2>Inbox Messages</h2>
      <table>
        <thead><tr><th>Name</th><th>Email</th><th>Message</th></tr></thead>
        <tbody id="messageTableBody"></tbody>
      </table>
    </div>

    <!-- Trade Insights -->
    <div class="content-section" id="tradeInsights">
      <h2>Upload Trade Insight</h2>
      <div class="form-group"><label>Date</label><input type="date" id="insightDate"/></div>
      <div class="form-group"><label>Screenshot</label><input type="file" id="insightFile" accept="image/*"/></div>
      <div class="form-group"><label>Note</label><textarea id="insightNote"></textarea></div>
      <button class="btn" id="submitInsight">Upload Insight</button>
    </div>

    <!-- Trade History -->
    <div class="content-section" id="tradeHistory">
      <h2>Upload Trade History</h2>
      <div class="form-group"><label>Month</label>
        <select id="historyMonth">
          <option>January</option><option>February</option><option>March</option>
          <option>April</option><option>May</option><option>June</option>
          <option>July</option><option>August</option><option>September</option>
          <option>October</option><option>November</option><option>December</option>
        </select>
      </div>
      <div class="form-group"><label>Screenshot</label><input type="file" id="historyFile" accept="image/*"/></div>
      <div class="form-group"><label>Note</label><textarea id="historyNote"></textarea></div>
      <button class="btn" id="submitHistory">Upload History</button>
    </div>

    <!-- Logs -->
    <div class="content-section" id="logs">
      <h2>Admin Logs</h2>
      <ul id="logList"></ul>
      <button class="btn" id="clearLogs">Clear Logs</button>
    </div>
  </div>

  <!-- Main Script -->
  <script src="app.js"></script>
</body>
</html>
