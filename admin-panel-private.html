<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CBE Admin Panel</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      overflow-x: hidden;
    }
    #sidebar {
      min-width: 250px;
      max-width: 250px;
      transition: all 0.3s;
      background: #1f1f1f;
      color: #fff;
      height: 100vh;
    }
    #sidebar.collapsed {
      margin-left: -250px;
    }
    #sidebar .nav-link {
      color: #ccc;
    }
    #sidebar .nav-link.active {
      background: #343a40;
      color: #fff;
    }
    #sidebar .nav-link:hover {
      background: #343a40;
      color: #fff;
    }
    #content {
      width: 100%;
      padding: 20px;
      transition: margin-left .3s;
    }
    #toggle-btn {
      cursor: pointer;
      font-size: 1.5rem;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="d-flex">
    <!-- Sidebar -->
    <nav id="sidebar" class="bg-dark">
      <div class="p-3">
        <h4 class="text-center">CBE Admin</h4>
        <ul class="nav nav-pills flex-column mt-4" id="menu">
          <li class="nav-item">
            <a class="nav-link active" data-section="dashboard" href="#">Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="users" href="#">Users</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="payments" href="#">Payments</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="messages" href="#">Messages</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="settings-payment" href="#">Payment Settings</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="trade-history" href="#">Trade History</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="trade-insights" href="#">Trade Insights</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-section="signals" href="#">Signals</a>
          </li>
          <li class="nav-item mt-auto">
            <a class="nav-link text-danger" href="#">Logout</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Page Content -->
    <div id="content">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div id="toggle-btn">&#8942;</div>
        <h2 id="section-title">Dashboard</h2>
      </div>

      <!-- Sections -->
      <div id="sections">
        <!-- Dashboard -->
        <div class="section" data-section="dashboard">
          <p>Welcome to your admin dashboard. Select a menu item to get started.</p>
        </div>

        <!-- Users -->
        <div class="section d-none" data-section="users">
          <h4>Users Verification</h4>
          <table class="table table-striped">
            <thead><tr><th>Email</th><th>Name</th><th>Status</th><th>Action</th></tr></thead>
            <tbody id="users-table">
              <!-- Example row -->
              <tr>
                <td>user1@example.com</td>
                <td>John Doe</td>
                <td><span class="badge bg-warning">Pending</span></td>
                <td>
                  <button class="btn btn-sm btn-success">Verify</button>
                  <button class="btn btn-sm btn-danger">Reject</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Payments -->
        <div class="section d-none" data-section="payments">
          <h4>Payment Approval</h4>
          <table class="table table-striped">
            <thead><tr><th>User</th><th>Amount</th><th>Date</th><th>Status</th><th>Action</th></tr></thead>
            <tbody id="payments-table">
              <tr>
                <td>Jane Smith</td>
                <td>$150</td>
                <td>2025-05-18</td>
                <td><span class="badge bg-warning">Pending</span></td>
                <td>
                  <button class="btn btn-sm btn-success">Approve</button>
                  <button class="btn btn-sm btn-danger">Decline</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Messages -->
        <div class="section d-none" data-section="messages">
          <h4>Contact Messages</h4>
          <div id="messages-list" class="list-group">
            <a href="#" class="list-group-item list-group-item-action">
              <strong>user2@example.com</strong> – “I need help with…”
            </a>
          </div>
        </div>

        <!-- Payment Settings -->
        <div class="section d-none" data-section="settings-payment">
          <h4>Payment Settings</h4>
          <form id="payment-settings-form">
            <div class="mb-3">
              <label for="wallet-address" class="form-label">Default Wallet Address</label>
              <input type="text" class="form-control" id="wallet-address" placeholder="Enter address">
            </div>
            <button type="submit" class="btn btn-primary">Save Settings</button>
          </form>
        </div>

        <!-- Trade History -->
        <div class="section d-none" data-section="trade-history">
          <h4>Trade History (Jan – Dec)</h4>
          <div class="mb-3">
            <label for="month-select" class="form-label">Select Month</label>
            <select id="month-select" class="form-select" style="max-width: 200px;">
              <option value="01">January</option>
              <option value="02">February</option>
              <option value="03">March</option>
              <option value="04">April</option>
              <option value="05">May</option>
              <option value="06">June</option>
              <option value="07">July</option>
              <option value="08">August</option>
              <option value="09">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
          </div>
          <table class="table table-striped">
            <thead><tr><th>Date</th><th>Pair</th><th>Notes</th><th>Screenshot</th></tr></thead>
            <tbody id="history-table">
              <!-- Populated via JS -->
            </tbody>
          </table>
        </div>

        <!-- Trade Insights -->
        <div class="section d-none" data-section="trade-insights">
          <h4>Weekly Pips Insights</h4>
          <form id="insights-form" class="mb-4">
            <div class="row g-3 align-items-end">
              <div class="col-md-4">
                <label for="insight-week" class="form-label">Week Ending</label>
                <input type="date" id="insight-week" class="form-control">
              </div>
              <div class="col-md-4">
                <label for="insight-pips" class="form-label">Pips Gained</label>
                <input type="number" id="insight-pips" class="form-control" placeholder="e.g. 120">
              </div>
              <div class="col-md-4">
                <button type="submit" class="btn btn-success">Post Insight</button>
              </div>
            </div>
          </form>
          <ul id="insights-list" class="list-group">
            <!-- Populated via JS -->
          </ul>
        </div>

        <!-- Signals -->
        <div class="section d-none" data-section="signals">
          <h4>Publish Signals</h4>
          <form id="signals-form">
            <div class="mb-3">
              <label for="signal-text" class="form-label">Signal Note</label>
              <textarea id="signal-text" class="form-control" rows="3"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Publish Signal</button>
          </form>
          <hr>
          <ul id="signals-list" class="list-group">
            <!-- Populated via JS -->
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS & Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Sidebar toggle
    document.getElementById('toggle-btn').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('collapsed');
    });

    // Menu navigation
    document.querySelectorAll('#menu .nav-link').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        // activate link
        document.querySelectorAll('#menu .nav-link').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        // show section
        const section = link.dataset.section;
        document.getElementById('section-title').textContent = link.textContent;
        document.querySelectorAll('.section').forEach(sec => {
          sec.classList.toggle('d-none', sec.dataset.section !== section);
        });
      });
    });

    // Placeholder data stores (replace with real AJAX calls)
    let tradeHistory = {
      '01': [{date:'2025-01-05', pair:'EUR/USD', notes:'Bought dip', screenshot:'—'}],
      // ... fill for other months
    };
    let insights = [];
    let signals = [];

    // Month selector change
    document.getElementById('month-select').addEventListener('change', () => {
      const m = document.getElementById('month-select').value;
      const tbody = document.getElementById('history-table');
      tbody.innerHTML = '';
      (tradeHistory[m]||[]).forEach(t => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${t.date}</td><td>${t.pair}</td><td>${t.notes}</td><td>${t.screenshot}</td>`;
        tbody.appendChild(tr);
      });
    });
    // initialize month
    document.getElementById('month-select').dispatchEvent(new Event('change'));

    // Post insights
    document.getElementById('insights-form').addEventListener('submit', e => {
      e.preventDefault();
      const date = document.getElementById('insight-week').value;
      const pips = document.getElementById('insight-pips').value;
      insights.unshift({date,pips});
      renderInsights();
      e.target.reset();
    });
    function renderInsights() {
      const ul = document.getElementById('insights-list');
      ul.innerHTML = '';
      insights.forEach(i => {
        const li = document.createElement('li');
        li.className = 'list-group-item';
        li.textContent = `${i.date}: ${i.pips} pips`;
        ul.appendChild(li);
      });
    }

    // Publish signals
    document.getElementById('signals-form').addEventListener('submit', e => {
      e.preventDefault();
      const text = document.getElementById('signal-text').value.trim();
      if (!text) return;
      signals.unshift({text, time:new Date().toLocaleString()});
      renderSignals();
      e.target.reset();
    });
    function renderSignals() {
      const ul = document.getElementById('signals-list');
      ul.innerHTML = '';
      signals.forEach(s => {
        const li = document.createElement('li');
        li.className = 'list-group-item';
        li.innerHTML = `<strong>[${s.time}]</strong> ${s.text}`;
        ul.appendChild(li);
      });
    }
  </script>
</body>
</html>
