<body>
  <video class="video-background" autoplay muted loop playsinline>
    <source src="star-video.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="overlay"></div>
  <div class="menu-container">
    <a href="index.html" class="logo">
      <img src="CBE_logo.png" alt="CBE Logo">
    </a>
    <div class="menu-icon" id="menuToggle">
      <span></span><span></span><span></span>
    </div>
  </div>
  <div class="menu-overlay" id="menuOverlay">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="CBE_trade_insights_public.html">Trade Insights</a></li>
      <li><a href="FAQ.html">FAQ</a></li>
      <li><a href="vip-subscription.html">VIP Subscription</a></li>
      <li><a href="payment-options.html">Payment Options</a></li>
      <li><a href="CBE_apply.html">Apply</a></li>
      <li><a href="CBE_contact.html">Contact</a></li>
      <li><a href="terms.html">Terms & Conditions</a></li>
      <li><a href="privacy.html">Privacy Policy</a></li>
      <li><a href="vip-dashboard.html">Dashboard</a></li>
      <li><a href="login.html">Login</a></li>
      <li><a href="CBE_apex_income_options.html">Apex Income Options</a></li>
      <li><a href="admin-panel.html">Admin Panel</a></li>
    </ul>
  </div>
  <div style="height: 90px;"></div>
  <div class="container">
    <div class="sidebar">
      <h3>Admin Menu</h3>
      <ul>
        <li><a href="#user-management">User Management</a></li>
        <li><a href="#application-approval">Application Approval</a></li>
        <li><a href="#trading-oversight">Trading Oversight</a></li>
        <li><a href="#site-settings">Site Settings</a></li>
      </ul>
    </div>
    <div class="main-content">
      <h1>Admin Panel</h1>
      <div class="dashboard-section" id="user-management">
        <h2>User Management</h2>
        <p>Total users: <span id="total-users">Loading...</span></p>
        <button onclick="showAddUserForm()" style="background: gold; color: #fff; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">Add New User</button>
        <div id="add-user-form" style="display: none; margin-bottom: 20px;">
          <input type="text" id="new-user-name" placeholder="Name" style="padding: 5px; margin-right: 10px;">
          <input type="email" id="new-user-email" placeholder="Email" style="padding: 5px; margin-right: 10px;">
          <select id="new-user-status" style="padding: 5px; margin-right: 10px;">
            <option value="active">Active</option>
            <option value="pending">Pending</option>
            <option value="inactive">Inactive</option>
          </select>
          <input type="date" id="new-user-date" style="padding: 5px; margin-right: 10px;">
          <select id="new-user-plan" style="padding: 5px; margin-right: 10px;">
            <option value="Apex Income Options">Apex Income Options</option>
            <option value="VIP Subscription">VIP Subscription</option>
            <option value="Basic">Basic</option>
          </select>
          <button onclick="addUser()" style="background: gold; color: #fff; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer;">Save</button>
          <button onclick="hideAddUserForm()" style="background: #444; color: #fff; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
        </div>
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
          <thead>
            <tr style="background: #333; color: gold;">
              <th style="padding: 10px; border: 1px solid #555;">ID</th>
              <th style="padding: 10px; border: 1px solid #555;">Name</th>
              <th style="padding: 10px; border: 1px solid #555;">Email</th>
              <th style="padding: 10px; border: 1px solid #555;">Status</th>
              <th style="padding: 10px; border: 1px solid #555;">Application Date</th>
              <th style="padding: 10px; border: 1px solid #555;">Trading Plan</th>
              <th style="padding: 10px; border: 1px solid #555;">Actions</th>
            </tr>
          </thead>
          <tbody id="user-table">
            <tr>
              <td colspan="7" style="padding: 10px; text-align: center; color: #ddd;">Loading users...</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="dashboard-section" id="application-approval">
        <h2>Application Approval</h2>
        <p>Placeholder for application approval logic.</p>
      </div>
      <div class="dashboard-section" id="trading-oversight">
        <h2>Trading Oversight</h2>
        <p>Placeholder for trading oversight logic.</p>
      </div>
      <div class="dashboard-section" id="site-settings">
        <h2>Site Settings</h2>
        <p>Placeholder for site settings logic.</p>
      </div>
    </div>
  </div>
  <div class="contact" id="contact">
    <h2>Contact Us</h2>
    <p><a href="https://wa.me/2349133957084" target="_blank">WhatsApp</a></p>
    <p><a href="https://t.me/apexincomeoptions" target="_blank">Telegram</a></p>
    <p><a href="mailto:support@chukwuemekabullionexchange.com" target="_blank">Email</a></p>
    <p style="margin-top: 30px;"><a href="CBE_apply.html" class="cta-button">Apply to Join Now</a></p>
  </div>
  <footer>
    Â© 2025 CBE - Chukwuemeka Bullion Exchange. All rights reserved.
  </footer>
  <script>
    const menuToggle = document.getElementById('menuToggle');
    const menuOverlay = document.getElementById('menuOverlay');
    menuToggle.addEventListener('click', () => {
      menuToggle.classList.toggle('active');
      menuOverlay.classList.toggle('active');
    });

    let usersData = [];

    // Load users from users.json
    fetch('users.json')
      .then(response => response.json())
      .then(data => {
        usersData = data;
        updateUserTable();
      })
      .catch(error => {
        console.error('Error fetching users:', error);
        document.getElementById('user-table').innerHTML = '<tr><td colspan="7" style="padding: 10px; text-align: center; color: #ddd;">Failed to load users.</td></tr>';
      });

    // Update user table
    function updateUserTable() {
      const userTable = document.getElementById('user-table');
      document.getElementById('total-users').textContent = usersData.totalUsers;
      userTable.innerHTML = '';
      usersData.users.forEach(user => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td style="padding: 10px; border: 1px solid #555;">${user.id}</td>
          <td style="padding: 10px; border: 1px solid #555;">${user.name}</td>
          <td style="padding: 10px; border: 1px solid #555;">${user.email}</td>
          <td style="padding: 10px; border: 1px solid #555;">${user.status}</td>
          <td style="padding: 10px; border: 1px solid #555;">${user.applicationDate}</td>
          <td style="padding: 10px; border: 1px solid #555;">${user.tradingPlan}</td>
          <td style="padding: 10px; border: 1px solid #555;">
            <button onclick="editUser(${user.id})" style="background: #4CAF50; color: #fff; padding: 5px 10px; border: none; border-radius: 5px; margin-right: 5px;">Edit</button>
            <button onclick="deleteUser(${user.id})" style="background: #f44336; color: #fff; padding: 5px 10px; border: none; border-radius: 5px;">Delete</button>
          </td>
        `;
        userTable.appendChild(row);
      });
    }

    // Show add user form
    function showAddUserForm() {
      document.getElementById('add-user-form').style.display = 'block';
    }

    // Hide add user form
    function hideAddUserForm() {
      document.getElementById('add-user-form').style.display = 'none';
    }

    // Add new user
    function addUser() {
      const name = document.getElementById('new-user-name').value;
      const email = document.getElementById('new-user-email').value;
      const status = document.getElementById('new-user-status').value;
      const applicationDate = document.getElementById('new-user-date').value;
      const tradingPlan = document.getElementById('new-user-plan').value;

      if (name && email && applicationDate) {
        const newUser = {
          id: usersData.users.length + 1,
          name: name,
          email: email,
          status: status,
          applicationDate: applicationDate,
          tradingPlan: tradingPlan
        };
        usersData.users.push(newUser);
        usersData.totalUsers = usersData.users.length;
        updateUserTable();
        saveUsersToJson();
        hideAddUserForm();
        document.getElementById('new-user-name').value = '';
        document.getElementById('new-user-email').value = '';
        document.getElementById('new-user-date').value = '';
      } else {
        alert('Please fill all required fields.');
      }
    }

    // Edit user (placeholder - to be enhanced)
    function editUser(id) {
      alert(`Edit user with ID: ${id}. (Add form logic here)`);
      // Enhance with a form to edit user details
    }

    // Delete user
    function deleteUser(id) {
      usersData.users = usersData.users.filter(user => user.id !== id);
      usersData.totalUsers = usersData.users.length;
      updateUserTable();
      saveUsersToJson();
    }

    // Save users to users.json (client-side simulation)
    function saveUsersToJson() {
      const dataStr = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(usersData, null, 2))}`;
      const downloadAnchorNode = document.createElement('a');
      downloadAnchorNode.setAttribute('href', dataStr);
      downloadAnchorNode.setAttribute('download', 'users.json');
      document.body.appendChild(downloadAnchorNode);
      downloadAnchorNode.click();
      downloadAnchorNode.remove();
    }
  </script>
</body>
