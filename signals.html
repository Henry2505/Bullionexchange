<script>
  window.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('main-content');
    const signals = JSON.parse(localStorage.getItem('vipSignals') || '[]');

    if (!signals.length) {
      container.innerHTML += '<p class="notice">No signals available yet.</p>';
      return;
    }

    signals.reverse().forEach((s, index) => {
      const box = document.createElement('div');
      box.className = 'signal-box';
      box.innerHTML = `
        <h2>${s.date || 'Date not set'}</h2>
        <div class="time">Time: ${s.time || 'Time not set'}</div>
        <div class="signal-content">
          <div class="copy-line"> ${s.type} ${s.pair} @ <span id="price${index}">${s.entry}</span>
            <button class="copy-button" onclick="copyToClipboard('price${index}')">Copy</button>
          </div>
          <div class="copy-line">TP: <span id="tp${index}">${s.tp}</span>
            <button class="copy-button" onclick="copyToClipboard('tp${index}')">Copy</button>
          </div>
          <div class="copy-line">SL: <span id="sl${index}">${s.sl}</span>
            <button class="copy-button" onclick="copyToClipboard('sl${index}')">Copy</button>
          </div>
        </div>
        ${s.note ? `<div class="admin-note">Note: ${s.note}</div>` : ''}
      `;
      container.appendChild(box);
    });
  });

  function copyToClipboard(id) {
    const txt = document.getElementById(id).textContent;
    navigator.clipboard.writeText(txt).then(() => alert('Copied: ' + txt));
  }
</script>
