<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VIP Forex Signal – CBE</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    html, body { margin:0; padding:0; font-family:'Poppins',sans-serif; background:#0b0b0b; color:#fff; user-select:none; }
    video.bg { position:fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:-2; }
    .overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:-1; }
    header { text-align:center; padding:60px 20px 30px; }
    header h1 { color:gold; font-size:36px; margin:0; }
    header p  { color:#ccc; font-size:16px; margin:8px 0 0; }
    .notice { text-align:center; color:#ff4444; font-size:14px; margin:20px 0; }
    .signal-box { max-width:600px; margin:0 auto; padding:25px; background:#141414; border-radius:12px; box-shadow:0 0 20px rgba(255,215,0,0.2); }
    .signal-box h2 { color:gold; margin:0 0 10px; }
    .time { color:#999; font-size:14px; margin-bottom:20px; }
    .signal-content { background:#1d1d1d; padding:20px; border-radius:8px; }
    .signal-content div { margin-bottom:12px; font-size:16px; }
    .signal-content span { color:#fff; }
    .copy-btn { margin-left:10px; background:gold; border:none; padding:5px 10px; border-radius:6px; cursor:pointer; animation:blink 2s infinite; }
    @keyframes blink { 0%,100%{box-shadow:0 0 5px gold}50%{box-shadow:0 0 15px gold} }
    .admin-note { margin-top:20px; font-style:italic; color:#ffcc00; font-size:14px; }
    footer { text-align:center; padding:20px; font-size:13px; color:#777; margin-top:30px; }
  </style>
</head>
<body oncontextmenu="return false">
  <video class="bg" autoplay muted loop><source src="star-video.MP4" type="video/mp4"/></video>
  <div class="overlay"></div>

  <header>
    <h1>Latest VIP Signal</h1>
    <p>Strictly for approved VIP members</p>
  </header>
  <div class="notice">Resale or sharing of these signals is illegal and punishable by law.</div>

  <div class="signal-box" id="signalBox">
    <!-- will be populated by script -->
  </div>

  <footer>© 2025 CBE – Chukwuemeka Bullion Exchange</footer>

  <script>
    // ensure user is logged in
    if (!sessionStorage.getItem('cbeLoggedIn')) {
      alert('Access denied. Please log in.');
      window.location.href = 'login.html';
    }

    // fetch and render the latest signal
    const signals = JSON.parse(localStorage.getItem('vipSignals') || '[]');
    const latest  = signals[signals.length - 1];
    const box     = document.getElementById('signalBox');

    if (!latest) {
      box.innerHTML = '<p style="text-align:center;color:#aaa;">No signals available yet.</p>';
    } else {
      box.innerHTML = `
        <h2>${latest.date} &nbsp;&nbsp;<small style="color:#bbb;">(${latest.time})</small></h2>
        <div class="signal-content">
          <div>Pair: <span>${latest.pair}</span> <button class="copy-btn" onclick="copyText('${latest.pair}')">Copy</button></div>
          <div>Type: <span>${latest.direction}</span></div>
          <div>Entry: <span id="entry">${latest.entry}</span> <button class="copy-btn" onclick="copy('entry')">Copy</button></div>
          <div>TP: <span id="tp">${latest.tp}</span> <button class="copy-btn" onclick="copy('tp')">Copy</button></div>
          <div>SL: <span id="sl">${latest.sl}</span> <button class="copy-btn" onclick="copy('sl')">Copy</button></div>
        </div>
        <div class="admin-note">Note: ${latest.note || 'Trade at your own risk.'}</div>
      `;
    }

    function copy(idOrText) {
      // if element id exists, read its text; else treat argument as literal text
      const txt = document.getElementById(idOrText)
                  ? document.getElementById(idOrText).textContent
                  : idOrText;
      navigator.clipboard.writeText(txt).then(() => alert('Copied: ' + txt));
    }

    function copyText(txt) { copy(txt) }

    // block PrintScreen
    document.addEventListener('keydown', e => {
      if (e.key === 'PrintScreen') {
        navigator.clipboard.writeText('');
        alert('Screenshots are disabled.');
        e.preventDefault();
      }
    });
  </script>
</body>
</html>
